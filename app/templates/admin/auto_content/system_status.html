{% extends 'admin/base.html' %}

{% block title %}–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã{% endblock %}

{% block content %}
<div class="admin-content">
  <div class="content-header">
    <h1>–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h1>
    <p class="lead">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π</p>
  </div>

  <div class="row">
    <!-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">üåç –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</h5>
        </div>
        <div class="card-body">
          <table class="table table-sm">
            <tbody>
              {% for key, value in status_info.environment.items() %}
              <tr>
                <td><strong>{{ key }}</strong></td>
                <td>{{ value }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</h5>
        </div>
        <div class="card-body">
          <table class="table table-sm">
            <tbody>
              {% for key, value in status_info.database.items() %}
              <tr>
                <td><strong>{{ key }}</strong></td>
                <td>
                  {% if value == True %}
                    <span class="badge bg-success">–î–∞</span>
                  {% elif value == False %}
                    <span class="badge bg-danger">–ù–µ—Ç</span>
                  {% else %}
                    {{ value }}
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-3">
    <!-- OpenAI -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">ü§ñ OpenAI API</h5>
        </div>
        <div class="card-body">
          <table class="table table-sm">
            <tbody>
              {% for key, value in status_info.openai.items() %}
              <tr>
                <td><strong>{{ key }}</strong></td>
                <td>
                  {% if value == True %}
                    <span class="badge bg-success">–î–∞</span>
                  {% elif value == False %}
                    <span class="badge bg-danger">–ù–µ—Ç</span>
                  {% else %}
                    {{ value }}
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>

          <hr>
          <h6>–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</h6>
          {% if openai_test.success %}
            <div class="alert alert-success">
              <strong>‚úÖ {{ openai_test.message }}</strong>
            </div>
          {% else %}
            <div class="alert alert-danger">
              <strong>‚ùå {{ openai_test.message }}</strong>
            </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- –ü–æ—á—Ç–∞ -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">üìß –ü–æ—á—Ç–∞</h5>
        </div>
        <div class="card-body">
          <table class="table table-sm">
            <tbody>
              {% for key, value in status_info.mail.items() %}
              <tr>
                <td><strong>{{ key }}</strong></td>
                <td>{{ value }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-3">
    <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h5>
        </div>
        <div class="card-body">
          <table class="table table-sm">
            <tbody>
              {% for key, value in status_info.app_config.items() %}
              <tr>
                <td><strong>{{ key }}</strong></td>
                <td>
                  {% if value == '—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' %}
                    <span class="badge bg-success">{{ value }}</span>
                  {% else %}
                    <span class="badge bg-danger">{{ value }}</span>
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-md-12">
      <div class="card">
        <div class="card-body">
          <h5>üîß –î–µ–π—Å—Ç–≤–∏—è</h5>
          <div class="btn-group">
            <a href="{{ url_for('auto_content.test_openai') }}" class="btn btn-info">
              <i class="fas fa-plug"></i> –¢–µ—Å—Ç OpenAI
            </a>
            <a href="{{ url_for('auto_content.index') }}" class="btn btn-secondary">
              <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
